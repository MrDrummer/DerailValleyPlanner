@using Microsoft.EntityFrameworkCore
@using DerailValleyPlanner.Data
@using DerailValleyPlanner.Models
@using System.Collections.ObjectModel
@* SelectedValuesChanged="JobsChanged" *@
@* <MudSelect T="IEnumerable<Job>" Label="@Label" @bind-SelectedValues="@Jobs" MultiSelection="true" AnchorOrigin="Origin.BottomCenter" TransformOrigin="Origin.TopCenter"> *@
@*     @foreach (var job in _jobList) *@
@*     { *@
@*         <MudSelectItem Value="@job.JobId">@job.ConsistId</MudSelectItem> *@
@*     } *@
@* </MudSelect> *@

@code {
    [Inject]
    private PlannerContext PlannerContext { get; set; }
    
    [Parameter]
    public string Label { get; set; }
    
    [Parameter]
    public Stop.Kind Type { get; set; }

    [Parameter]
    public IEnumerable<Job> Jobs { get; set; }
    
    [Parameter]
    public string Yard { get; set; }
    
    [Parameter]
    public EventCallback<IEnumerable<Job>> JobsChanged { get; set; }

    private IEnumerable<Job> _jobList;

    
    protected override async Task OnInitializedAsync()
    {
        await GetJobs();
    }

    async Task GetJobs()
    {
        // _jobList = await PlannerContext.Jobs.Where(j =>
        //     Type == Stop.Kind.Load
        //         ? j.FromYard == Yard
        //         : j.ToYard == Yard
        //     ).ToListAsync();
    }
}